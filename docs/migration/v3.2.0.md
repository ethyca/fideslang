# Fideslang 3.2.0 Migration Guide

## Overview

Fideslang v3.2.0 improves the data categories and data uses taxonomies with better organization and new granular categories. **Your existing code will continue to work** - deprecated items include `replaced_by` pointers to guide you to the new ones.

## Migration Approach

**Simple**: Update your taxonomy references by following the `replaced_by` field in deprecated items. 

**Automated**: We're working on automated migration tools in Fides to make this process seamless.

## What's Changed

### Data Categories

### Replaced Categories

| Deprecated Category | Replaced By |
|---------------------|-------------|
| `user.biometric` | `user.biometrics` |
| `user.biometric.fingerprint` | `user.biometrics.fingerprint` |
| `user.biometric.retinal` | `user.biometrics.retinal` |
| `user.biometric.voice` | `user.biometrics.voice` |
| `user.childrens` | `user.children` |
| `user.contact.url` | `user.contact.social_url` |
| `user.health_and_medical` | `user.health` |
| `user.health_and_medical.genetic` | `user.health.genetic` |
| `user.health_and_medical.insurance_beneficiary_id` | `user.health.insurance_beneficiary_id` |
| `user.health_and_medical.record_id` | `user.health.record_id` |
| `user.location.imprecise` | `user.location.coarse` |
| `user.job_title` | `user.professional_information.job_title` |
| `user.workplace` | `user.professional_information.workplace` |
| `user.account.settings` | `user.settings` |
| `user.social` | `user.social_activity` |
| `user.authorization.biometric` | `user.authorization.biometrics` |
| `user.sensor` | `user.device.sensor` |
| `user.telemetry` | `user.device.telemetry` |

### Merged Categories

| Deprecated Category | Replaced By |
|---------------------|-------------|
| `user.biometric.health` | `user.biometrics` |
| `user.contact.organization` | `user.contact` |
| `user.user_sensor` | `user.device.sensor` |
| `user.unique_id.pseudonymous` | `user.unique_id` |

### New Categories Added

| New Category | Parent Category |
|--------------|-----------------|
| `user.biometrics` | `user` |
| `user.children` | `user` |
| `user.children.children_under_thirteen` | `user.children` |
| `user.children.thirteen_to_sixteen` | `user.children` |
| `user.contact.social_url` | `user.contact` |
| `user.contact.address.mailing_address` | `user.contact.address` |
| `user.demographic.citizenship_or_immigration_status` | `user.demographic` |
| `user.demographic.philosophical_belief` | `user.demographic` |
| `user.demographic.protected_classifications` | `user.demographic` |
| `user.demographic.union_membership` | `user.demographic` |
| `user.device.sensor` | `user.device` |
| `user.device.telemetry` | `user.device` |
| `user.health` | `user` |
| `user.health.baby_formula` | `user.health` |
| `user.health.condition` | `user.health` |
| `user.health.genetic` | `user.health` |
| `user.health.insurance_beneficiary_id` | `user.health` |
| `user.health.maternity_clothing` | `user.health` |
| `user.health.medical_diagnosis` | `user.health` |
| `user.health.medications` | `user.health` |
| `user.health.prescriptions` | `user.health` |
| `user.health.record_id` | `user.health` |
| `user.health.reproductive_or_sexual` | `user.health` |
| `user.health.social_psychological_behavioral` | `user.health` |
| `user.health.symptons` | `user.health` |
| `user.health.treatment` | `user.health` |
| `user.location.coarse` | `user.location` |
| `user.professional_information` | `user` |
| `user.professional_information.job_title` | `user.professional_information` |
| `user.professional_information.workplace` | `user.professional_information` |
| `user.settings` | `user` |
| `user.social_activity` | `user` |
| `user.authorization.biometrics` | `user.authorization` |
| `user.biometrics.fingerprint` | `user.biometrics` |
| `user.biometrics.retinal` | `user.biometrics` |
| `user.biometrics.voice` | `user.biometrics` |
| `user.unique_id.deterministic` | `user.unique_id` |
| `user.unique_id.probablistic` | `user.unique_id` |

### Data Uses

#### Replaced Data Uses

*TBD - Data use taxonomy changes will be documented here*

#### Merged Data Uses  

*TBD - Merged data use categories will be documented here*

#### New Data Uses Added

*TBD - New data use categories will be documented here*

## How to Migrate

1. **Check your current taxonomy items**: Look at any fideslang data category or data use references in your codebase
2. **Find replacements**: For deprecated items, check the `replaced_by` field to find the new item
3. **Update references**: Replace old taxonomy names with new ones in your configuration files, code, etc.

### Example Migration
```python
from fideslang.default_taxonomy import check_for_deprecated_default_fides_key
from fideslang.models import DataCategory

# Check if your default taxonomy category is deprecated
category_to_check = "user.biometric.fingerprint"
try:
    result = check_for_deprecated_default_fides_key(DataCategory, category_to_check)
    if result.is_deprecated:
        print(f"'{category_to_check}' is deprecated - use '{result.fides_key}' instead")
        # result.fides_key = "user.biometrics.fingerprint"
    else:
        print(f"'{category_to_check}' is not deprecated - no migration needed")
except ValueError as e:
    print(f"Error: {e}")

# Same pattern applies to data uses when they are updated
```

